###############################################################################
#                         ClearLaggEnhanced Configuration                     #
###############################################################################

# Config version - DO NOT MODIFY (used for automatic updates)
config-version: 3

# ============================================================================ #
#                           Entity Clearing System                             #
# ============================================================================ #

entity-clearing:
  # Enable automatic entity clearing
  enabled: true
  
  # Clear interval in seconds (default: 300 = 5 minutes)
  interval: 300
  
  # Protection settings
  protect-named-entities: true
  protect-tamed-entities: true
  
  # Target worlds (empty list = all worlds)
  worlds: []

  # -------------------------------- Whitelist --------------------------------- #
  # Entities that will NEVER be cleared (protected)
  # All entities NOT in this list will be cleared (except players, named, and tamed)
  whitelist:
    # Friendly Mobs
    - "VILLAGER"
    - "IRON_GOLEM"
    - "SNOW_GOLEM"
    - "CAT"
    - "PARROT"

    # Decorative / Utility
    - "ARMOR_STAND"
    - "ITEM_FRAME"
    - "GLOW_ITEM_FRAME"
    - "PAINTING"

    # Vehicles
    - "MINECART"
    - "CHEST_MINECART"
    - "FURNACE_MINECART"
    - "HOPPER_MINECART"
    - "BOAT"
    - "CHEST_BOAT"

# ============================================================================ #
#                          Lag Prevention Modules                              #
# ============================================================================ #

lag-prevention:
  
  # ------------------------------ Mob Limiter ------------------------------- #
  mob-limiter:
    enabled: true
    max-mobs-per-chunk: 50

    # Per-type limits: Limit specific mob types per chunk
    per-type-limits:
      enabled: true
      limits:
        ZOMBIE: 10
        SKELETON: 10
        CREEPER: 8
        SPIDER: 8
        ENDERMAN: 5
        VILLAGER: 15
        COW: 12
        SHEEP: 12
        PIG: 12
        CHICKEN: 15
        IRON_GOLEM: 3

  # ---------------------------- Redstone Limiter ---------------------------- #
  # Prevents lag machines while allowing normal farms
  # Optimized for medium-sized servers with medium-sized farms
  redstone-limiter:
    enabled: false
    reset-period-ms: 4000
  
    blocks:
      enabled: true
      threshold:
        GLOBAL: 6
        PISTON: 6
        STICKY_PISTON: 6
        OBSERVER: 12
        DISPENSER: 6
        DROPPER: 6
        REPEATER: 10
        COMPARATOR: 10
        REDSTONE_TORCH: 8
        REDSTONE_WALL_TORCH: 8
        HOPPER: 12
        TARGET: 6
        LECTERN: 4
  
    chunks:
      enabled: true
      threshold: 4000

    # Maximum blocks a piston can push (vanilla default: 12)
    max-piston-push: 12
  
  # ----------------------------- Hopper Limiter ----------------------------- #
  hopper-limiter:
    enabled: true
    transfer-cooldown: 8
  
  # ---------------------------- Spawner Limiter ----------------------------- #
  spawner-limiter:
    enabled: true
    spawn-delay-multiplier: 1.5
  
  # ------------------------ Misc Entity Limiter ---------------------------- #
  # Limits miscellaneous (non-mob) entities per chunk
  misc-entity-limiter:
    enabled: true
    
    # Per-chunk entity limits (-1 or missing = unlimited)
    limits-per-chunk:
      ARMOR_STAND: 5
      BOAT: 5
      CHEST_BOAT: 5
      MINECART: 5
      ITEM_FRAME: 5
      GLOW_ITEM_FRAME: 5
      PAINTING: 5
    
    # Protection settings
    protect:
      named: true
      tags:
        - "CLE_PROTECTED"
    
    # Sweep configuration
    sweep:
      interval-ticks: 100
      max-chunks-per-tick: 20
    
    # Admin notifications
    notify:
      admins-permission: "CLE.admin"
      throttle-seconds: 60
    
    # Target worlds (empty = all worlds)
    worlds: []

# ============================================================================ #
#                              Chunk Finder Tool                               #
# ============================================================================ #

chunk-finder:
  # Scan radius around player in chunks
  radius: 10
  
  # Entities per chunk to be considered "laggy"
  entity-threshold: 50

# ============================================================================ #
#                           Notification Settings                              #
# ============================================================================ #

notifications:
  # Warning broadcast times before clearing (in seconds)
  broadcast-times: [60, 30, 10, 5]
  
  # Notification display type: CHAT, ACTION_BAR, or TITLE
  type: "ACTION_BAR"
  
  # Display console notifications when entities are cleared
  console-notifications: false
  
  # Sound effects
  sound:
    enabled: true
    name: "BLOCK_NOTE_BLOCK_PLING"
    volume: 1.0
    pitch: 1.2

# ============================================================================ #
#                         Performance Monitoring                               #
# ============================================================================ #

performance:
  # Update interval in ticks (20 ticks = 1 second)
  update-interval: 20

# ============================================================================ #
#                            Database Settings                                 #
# ============================================================================ #

database:
  # Database type: sqlite or mysql
  type: "sqlite"
  
  # SQLite database file name
  file: "clearlagg.db"
  
  # MySQL configuration (only used if type is "mysql")
  mysql:
    host: "localhost"
    port: 3306
    database: "clearlagg"
    username: "root"
    password: "password"
    ssl: false
